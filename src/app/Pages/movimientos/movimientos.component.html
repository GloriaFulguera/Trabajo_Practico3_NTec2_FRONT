<div class="container py-4">
    <div class="row mb-3">
        <h3 class="mb-4">Movimientos</h3>
        <div class="col-md-6">
            <label for="categoria" style="font-weight: bold;">Categoría</label>
            <select id="categoria" class="form-select" [(ngModel)]="CategoriaId" (change)="GetProductosPorCategoria()">
                <option value="" disabled selected>Select</option>
                <option *ngFor="let cat of Categorias" [value]="cat.id">{{ cat.nombre }}</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="producto" style="font-weight: bold;">Producto</label>
            <select id="producto" class="form-select" [(ngModel)]="ProductoId">
                <option value="" disabled selected>Select</option>
                <option *ngFor="let prod of Productos" [value]="prod.id">{{ prod.nombre }}</option>
            </select>
        </div>
    </div>

    <div class="row mb-3">
        <div class="col-md-6">
            <label for="tipo" style="font-weight: bold;">Tipo</label>
            <select id="tipo" class="form-select" [(ngModel)]="TipoMovimiento">
                <option value="" disabled selected>Select</option>
                <option value="entrada">Entrada</option>
                <option value="salida">Salida</option>
            </select>
        </div>
        <div class="col-md-6">
            <label for="cantidad" style="font-weight: bold;">Cantidad</label>
            <input id="cantidad" type="number" class="form-control" [(ngModel)]="Cantidad" />
        </div>
    </div>

    <div class="mb-3">
        <label for="descripcion">Descripción</label>
        <textarea id="descripcion" class="form-control" rows="3" [(ngModel)]="Descripcion"></textarea>
    </div>

    <div class="mb-5">
        <button class="btn btn-success mt-3" data-bs-toggle="modal" data-bs-target="#confirmar">
            Añadir movimiento
        </button>

    </div>

    <h5>Detalle de movimientos</h5>
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>Producto</th>
                <th>Tipo</th>
                <th>Cantidad</th>
                <th>Fecha</th>
                <th>Observacion</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let mov of Movimientos">
                <td>{{ mov.id }}</td>
                <td>{{ mov.producto }}</td>
                <td>{{ mov.tipo }}</td>
                <td>{{ mov.cantidad }}</td>
                <td>{{ mov.fecha }}</td>
                <td>{{ mov.observacion }}</td>
            </tr>
        </tbody>
    </table>
</div>


<div class="modal fade" id="confirmar" tabindex="-1" aria-labelledby="ConfirmarLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="ConfirmarLabel">Confirmar Movimiento</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        ¿Estás seguro/a que querés registrar este movimiento?
        <br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-success" (click)="CreateMovimiento()" data-bs-dismiss="modal">Confirmar</button>
      </div>
    </div>
  </div>
</div>
